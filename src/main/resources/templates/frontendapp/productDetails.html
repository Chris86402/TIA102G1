<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>商品資訊</title>
	<!-- 共同引入 headTag-import meta tag-->
	<meta th:replace="~{frontendapp/components/common :: headtag-import}">
	<script src="path/to/your/script.js" defer></script> <!-- 確保 JS 腳本在 DOM 加載後執行 -->
	 <style>
        .product-large-image {
            text-align: center; /* 水平置中 */
            height: 100%;       /* 確保容器有高度 */
        }

        .single-img {
            display: inline-block; /* 使容器適應內容的寬度 */
        }

        #product-image {
            height: 200px; /* 設定圖片高度 */
            object-fit: cover; /* 避免圖片變形 */
        }
    </style>
	
</head>
<body id="product">
<!-- 共用元件 header:圖示按鈕, navbar...-->
<div th:replace="~{frontendapp/components/common :: app-header}"></div>
<!-- 共用元件(index除外) bread crumb -->
<div th:replace="~{frontendapp/components/common :: app-bread-crumb(title=${'商品資訊'})}"></div>

<main>
	<!-- 把你的內容貼在這裡-->
	<div class="product-deatils-section float-left w-100">
		<div class="container">
			<div class="row">
				<div class="left-columm col-lg-5 col-md-5">

<!--				todo 商品圖 proPic -->
					<div class="product-large-image tab-content">
						<div class="tab-pane active" id="product-01" role="tabpanel" aria-labelledby="product-tab-01">
							<div class="single-img img-full">
								<img id="product-image" alt="Product Image" style="height: 200px; object-fit: cover;">

							</div>
						</div>
					</div>

				</div>

				<div class="right-columm col-lg-7 col-md-7">

<!--					商品資訊 -->
					<div class="product-information">

						<h4 class="product-title text-capitalize float-left w-100">
							<!-- 商品名稱 proName -->
							<div class="float-left w-100" th:text="${product.proName}">
							</div>
						</h4>
<!--						商品描述 proDesc -->
						<div class="description" th:text="${product.proDesc}">
						</div>

						<div class="rating">
<!--							平均星星數 commentStars/commentUsers -->
<!--							<p th:text="${averageRating}"></p>-->
							<div class="product-ratings d-inline-block align-middle">
								<div class="product-ratings d-inline-block align-middle">
									<span class="fa fa-stack" th:each="i : ${#numbers.sequence(1, 5)}">
										<i class="material-icons" th:classappend="${i <= averageRating} ? '' : 'off'">star</i>
									</span>
								</div>
							</div>
							<a href="#" class="review-down">(查看評價)</a>
						</div>

						<div class="price float-left w-100 d-flex">
<!--							商品價格 proPrice-->
							<div class="regular-price" th:text="${'$' + product.proPrice}"></div>
						</div>

						<div class="btn-cart d-flex align-items-center float-left w-100">

							<h5>數量:</h5>
							<!-- 根據商品數量加入購物車 -->
							<form>
								<label>
									<input value="1" type="number">
								</label>
<!--								<p th:text="${product.productId}"></p>-->
								<button type="button" class="btn btn-primary btn-cart m-0" data-target="#cart-pop"
										data-toggle="modal" th:value="${product.productId}"
										id="addToCartBtn">
<!--									todo 會員id先假設 value="10", 要改掉-->
									<input type="hidden" id="memberId" value="10">
									<i class="material-icons">shopping_cart</i>
									加入購物車
								</button>
							</form>
						</div>

<!--                 todo 加入最愛, 不跳轉, 顯示popout, 前端渲染-->
						<div class="tt-links d-flex align-items-center float-left w-100 mb-15">
							<a href="wishlist.html" class="link btn-wishlist">
								<i class="material-icons">favorite</i>
								<span>加入最愛</span>
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="product-tab-area float-left w-100">
		<div class="container">
<!--		切換商品資訊和評價-->
			<div class="tabs">
				<ul class="nav nav-tabs justify-content-start">
					
					<li class="nav-item">
						<a class="nav-link active" data-toggle="tab" href="#product-tab2" id="tab2">
						<div class="tab-title">顧客評價</div>
						</a>
					</li>
				</ul>
			</div>

			

<!-- =========== todo 商品評價紀錄 資料庫table: productComment ============= -->
				<div class="tab-pane" id="product-tab2" role="tabpanel" aria-labelledby="tab2">
					<div class="reviews-tab  float-left w-100">
<!--						總評價人數 commentUsers 動態產生div數量-->
						<div class="ttreview-tab float-left w-100 p-30">

							<div class="rating float-left w-100">
								<div class="product-ratings d-inline-block align-middle">
<!--									滿意度 commentRate-->
									<span class="fa fa-stack"><i class="material-icons">star</i></span>
									<span class="fa fa-stack"><i class="material-icons">star</i></span>
									<span class="fa fa-stack"><i class="material-icons">star</i></span>
									<span class="fa fa-stack"><i class="material-icons off">star</i></span>
									<span class="fa fa-stack"><i class="material-icons off">star</i></span>
								</div>
							</div>

							<div class="review-title float-left w-100">
<!--								會員帳號 account 資料庫table: member-->
								<span class="user">admin</span>

<!--								評論時間 commentDate	-->
								<span class="date">– February 14, 2019</span>
							</div>

<!--							評論內容 commentText-->
							<div class="review-desc  float-left w-100">
								Aliquam at ipsum tellus. Donec arcu est, posuere quis
								orci vel, commodo cursus augue.
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div id="product-accessories" class="product-accessories my-40 w-100 float-left">
		<div class="container">
			<div class="row">
				<div class="tt-title d-inline-block float-none w-100 text-center">推薦商品</div>

<!--				todo 隨機推薦商品  -->
				<div class="product-accessories-content products grid owl-carousel">
<!--					todo 動態產生此div數量-->
					<div class="product-layouts">
						<div class="product-thumb">
<!--							todo 商品圖片-->
							<div class="image zoom">
								<a href="product-details.html">
									<img src="img/products/01.jpg" alt="01"/>
									<img src="img/products/02.jpg" alt="02" class="second_image img-responsive"/>
								</a>
							</div>

							<div class="thumb-description">
								<div class="caption">
									<h4 class="product-title text-capitalize">
<!--										todo 商品名稱-->
										<a href="product-details.html">
											aliquam quaerat voluptatem
										</a>
									</h4>
								</div>

<!--							todo 隨機商品的平均星星數 如何從此頁拿到其他商品的averageRating? -->
								<div class="rating">
									<!-- commentStars/commentUsers -->
									<p th:text="${averageRating}"></p>
									<div class="product-ratings d-inline-block align-middle">
										<div class="product-ratings d-inline-block align-middle">
											<span class="fa fa-stack" th:each="i : ${#numbers.sequence(1, 5)}">
												<i class="material-icons" th:classappend="${i <= averageRating} ? '' : 'off'">star</i>
											</span>

											<span class="fa fa-stack"><i class="material-icons">star</i></span>
											<span class="fa fa-stack"><i class="material-icons">star</i></span>
											<span class="fa fa-stack"><i class="material-icons">star</i></span>
											<span class="fa fa-stack"><i class="material-icons off">star</i></span>
											<span class="fa fa-stack"><i class="material-icons off">star</i></span>
										</div>
									</div>
								</div>

								<div class="price">
<!--									todo 隨機商品的價格-->
									<div class="regular-price">$100.00</div>
								</div>

								<div class="button-wrapper">
									<div class="button-group text-center">

<!--										todo 加入購物車-->
										<button type="button" class="btn btn-primary btn-cart" data-target="#cart-pop"
												data-toggle="modal"><i class="material-icons">shopping_cart</i><span>Add to cart</span>
										</button>

<!--										todo 加入最愛-->
										<a href="wishlist.html" class="btn btn-primary btn-wishlist"><i
												class="material-icons">favorite</i><span>wishlist</span></a>

<!--										todo 跳出商品預覽modal 去common綁定-->
										<button type="button" class="btn btn-primary btn-quickview" data-toggle="modal"
												data-target="#product_view"><i class="material-icons">visibility</i><span>Quick View</span>
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- 把你的內容貼在這裡-->
</main>

<!--加入購物車按鈕-->
<script src="/frontendapp/js/shopping/addToCart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // 獲取當前 URL 的路徑
    const path = window.location.pathname; // 例如 /product/1001

    // 提取 URL 中的 ID (假設 URL 是 /product/1001)
    const segments = path.split('/');
    const productId = segments[segments.length - 1]; // 獲取最後一個段落

    // 構建圖片 URL
    const imgSrc = `/productInfo/ProductInfoReader?productId=${productId}`;

    // 設置圖片的 src 屬性
    document.getElementById('product-image').src = imgSrc;
});

</script>

<!-- 共用元件 footer和一些按鈕功能 -->
<div th:replace="~{frontendapp/components/common :: app-footer}"></div>
<!-- 選用元件 app-modals互動視窗 -->
<div th:replace="~{frontendapp/components/common :: app-modals}"></div>
<!-- 共同引入 置底 import-in-the-end -->
<div th:replace="~{frontendapp/components/common :: import-in-the-end}"></div>
<script src="/frontendapp/js/jquery-ui.min.js"></script>
<script src="/frontendapp/js/jquery.sticky-kit.min.js"></script>

</body>

</html>